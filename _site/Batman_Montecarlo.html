<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="//gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="pragma" content="no-cache" />

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Batman Integration &middot; LeiosOS
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="atom" href="/feed.xml">

   <!-- MATHJAX -->
   <script type="text/javascript"
           src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
   </script>
...
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          LeiosOS
        </a>
      </h1>
      <p class="lead">This is a site for James Schloss, physics PhD student at <a href="http://www.oist.jp/" target="_blank">OIST</a>. We solve silly questions with code.</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
            <a class="sidebar-nav-item active" href="/Batman_Montecarlo"> Batman Integration <span style="font-family:monospace; color: green">100%</span></a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/invlens"> Invisible Lens <span style="font-family:monospace; color: yellow">75%</span></a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/99MaxwellsDemon"> Maxwell's Demon <span style="font-family:monospace; color: green">100%</span></a>
          
        
      

      <a class="sidebar-nav-item" href="https://github.com/leios/simuleios" target = "_blank">GitHub</a>
      <a class="sidebar-nav-item" href="https://www.youtube.com/c/leiosos" target = "_blank">Youtube</a>
      <a class="sidebar-nav-item" href="http://www.twitch.tv/simuleios" target = "_blank">Twitch</a>
      <a class="sidebar-nav-item" href="https://twitter.com/LeiosOS" target = "_blank">Twitter</a>
      <a class="sidebar-nav-item" src="../public/atom.png" href="/feed.xml" target = "_blank" type="application/atom+xml"><img border="0" src="../public/atom.png"></a>

    </nav>

    <p>&copy; 2018. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="page">
  <h1 class="page-title">Batman Integration</h1>
  <div class="youtube-16-9">
  <iframe height="100%" width="100%" src="https://www.youtube.com/embed/AyBNnkYrSWY" frameborder="0" allowfullscreen=""></iframe>
</div>

<ul>
  <li><a href="#bg">Background</a></li>
  <li><a href="#BatmanCurve">Integrating the Batman Curve</a></li>
</ul>

<p><a name="bg"></a></p>

<h2 id="background">Background</h2>

<p>The Monte Carlo algorithm is used all over the world for a number of things.
In physics, it is often used to find integrals of poorly-behaved functions, and it works incredibly well for that!
Let’s take a minute to describe how the Monte Carlo algorithm works and why it’s cool.</p>

<p>Firstly, let’s define what an integral is: it is a fancy way to find an area.
For now, that’s all we need to know. 
Sure, there are plenty of people who make it way, way more complicated than that, but the simpler the definition, the simpler the algorithm.
I like simple algorithms.</p>

<p>So, if an integral is just an area, what do we need to do to find that area?
Well, use geometry!
If we have a box, the area of the box is obviously its <script type="math/tex">width \times height</script>. 
If we have a triangle, the area is simply <script type="math/tex">\frac{1}{2} width \times height</script>. 
Generally, the more complicated the shape, the harder it is to find the shape’s area from geometry.</p>

<p>That said, we don’t really need to find the shape of the object we are integrating to find it’s area.
Instead, we can take a simple object, find the area of that and then embed a more complicated object inside of it. 
If we can find the ratio of how filled the simple object is by the more complicated object inside of it, then we can find the area of the complicated object like so:</p>

<script type="math/tex; mode=display">Ratio \times Area\ of\ simple\ object</script>

<p>Of course, this will only work if the simple object is larger than the more complicated one, such that the complicated object falls perfectly inside of the larger object’s boundaries.</p>

<p>Let’s take the example of a circle and square:</p>

<p><img src="../images/Batman/square_circle.png" alt="Circle inside of Square" class="center-image" /></p>

<p>In this case, the area of the circle is <script type="math/tex">\pi \times Radius^2</script> and the area of the square is <script type="math/tex">4 * Radius^2</script>. 
This means that</p>

<script type="math/tex; mode=display">Ratio = \frac{\pi \times Radius^2}{4 * Radius^2} = \frac{\pi}{4}</script>

<p>From here, it’s obvious that</p>

<script type="math/tex; mode=display">Ratio \times Area\ of\ Square = \frac{\pi}{4} \times 4 * Radius^2 = \pi \times Radius^2</script>

<p>Or the area of the circle.</p>

<p>But now we have a question: How do we find that ratio for arbitrary shapes?
Well, Monte Carlo’s solution to this is <em>Random Sampling</em>.
If we take a bunch of points in the simple region with the more complicated shape inside, then</p>

<script type="math/tex; mode=display">Ratio = \frac{Count\ in\ Complicated\ Shape}{Count\ in\ Box}</script>

<p>And that’s pretty cool. 
It means that if we take a whole bunch of points, we should be able to find the ratio and integrate any arbitrarily shaped / size object!
For the example above:</p>

<p><img src="../images/Batman/MonteCarlo.gif" alt="gif of simple Monte Carlo algorithm" class="center-image" /></p>

<p>And we see that the ratio is pretty darn close to <script type="math/tex">\frac{\pi}{4} = 0.785398</script>.</p>

<p>The most difficult part of the Monte Carlo algorithm is finding the appropriate evaluation function.
For example: How did we know whether a random point on the plane was within the circle above?
Well, we simply had to plug it into a function that checked to see whether a line drawn from the origin to the x-y location of the random point was greater or less than a provided radius for the circle.
The code basically looks like:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Function to check whether point is in circle or not
</span><span class="kt">bool</span> <span class="n">in_circle</span><span class="p">(</span><span class="n">pos</span> <span class="n">loc</span><span class="p">,</span> <span class="n">pos</span> <span class="n">origin</span><span class="p">,</span> <span class="kt">double</span> <span class="n">radius</span><span class="p">){</span>

    <span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="n">loc</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">y</span> <span class="o">=</span> <span class="n">loc</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">radius</span><span class="p">){</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span><span class="p">{</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>That said, the true power of the Monte Carlo algorithm comes from the fact that we may now integrate somewhat arbitrary functions, for a good example of this, see the next section!</p>

<p><a href="" name="BatmanCurve"></a></p>

<h2 id="integrating-the-batman-curve">Integrating the Batman Curve</h2>

<p>Now here’s the thing: Monte Carlo doesn’t need to use boxes and it doesn’t need to integrate obvious shapes. 
Let’s talk about what you need to do to integrate non-obvious functions with one of our favorite superheroes: Batman!</p>

<p>To be clear: the Batman Curve was not created by me.
I found it on <a href="https://www.reddit.com/">reddit</a> and found all the information I needed <a href="http://math.stackexchange.com/questions/54506/is-this-batman-equation-for-real">on this math stack exchange post</a>.
In addition, <a href="http://mathworld.wolfram.com/BatmanCurve.html">WolframMathWorld had a decent page with the integral on it</a>.
Because the Batman Curve is difficult to integrate (though not impossible by any means!) and it has a clear analytically-defined integral to compare our Monte Carlo integration algorithm against, it was the perfect choice to test some things out.</p>

<p>First things first, for this integral, we were not using a standard box as described above. Instead we were using an oval. 
Honestly, the objects don’t matter, but I thought it was worthwhile to point out that the area of the oval is simple <script type="math/tex">\pi \times Shortest\ distance \times Longest\ distance</script>, so <script type="math/tex">\pi \times Radius^2</script> with the shortest and longest distances to the oval from the origin as the radii.</p>

<p>The batman curve was a little tricky, we had to split it into the following equations (<a href="http://math.stackexchange.com/questions/54506/is-this-batman-equation-for-real">image created by Jack in the previously mentioned math stack exchange post</a>):</p>

<p><img src="http://i.stack.imgur.com/EHNR8.png" alt="Image of equations, found here: http://math.stackexchange.com/questions/54506/is-this-batman-equation-for-real" class="center-image" /></p>

<p>Which, when plotted provide:</p>

<p><img src="../images/Batman/simple_bat.png" alt="Batman Curve" class="center-image" /></p>

<p>Then we had to write a simple function to determine if a point inside the oval was within the Batman Curve or not. 
To do this, we divided the curve into the following sections:</p>

<p><img src="../images/Batman/batblocks.png" alt="Batman Curve with blocks" class="center-image" /></p>

<p>And here is a visualization of the output:</p>

<p><img src="../images/Batman/batman.gif" alt="gif of Batman Monte Carlo" class="center-image" /></p>

<p>Here is the function (Nothing special, really):</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1">// Function to check if we are in batman function for monte_carlo
</span><span class="kt">bool</span> <span class="n">is_batman</span><span class="p">(</span><span class="n">pos</span> <span class="n">dot</span><span class="p">,</span> <span class="n">pos</span> <span class="n">ori</span><span class="p">,</span> <span class="kt">double</span> <span class="n">scale</span><span class="p">){</span>

    <span class="c1">// Determine x and y locations
</span>    <span class="kt">double</span> <span class="n">pos_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">dot</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">ori</span><span class="p">.</span><span class="n">x</span><span class="p">)</span> <span class="o">/</span> <span class="n">scale</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">pos_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">dot</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">ori</span><span class="p">.</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="n">scale</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">temp_x</span><span class="p">,</span> <span class="n">temp_y</span><span class="p">;</span>

        <span class="c1">// Drawing left upper wing
</span>        <span class="k">if</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mi">3</span><span class="p">){</span>
            <span class="n">temp_x</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">7</span> <span class="o">*</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="p">((</span><span class="n">pos_y</span> <span class="o">*</span> <span class="n">pos_y</span><span class="p">)</span><span class="o">/</span><span class="mf">9.0</span><span class="p">)));</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">&gt;=</span> <span class="n">temp_x</span><span class="p">){</span>
                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span><span class="p">{</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// Drawing left shoulder
</span>        <span class="k">if</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="n">pos_x</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
            <span class="n">temp_x</span> <span class="o">=</span> <span class="o">-</span><span class="n">pos_x</span><span class="p">;</span>
            <span class="n">temp_y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="mf">2.710523708715754</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.5</span> <span class="o">-</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">temp_x</span><span class="p">))</span> 
                     <span class="o">+</span><span class="mf">1.355261854357877</span>
                     <span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">4.0</span><span class="o">-</span><span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">temp_x</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">temp_x</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">));</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">pos_y</span> <span class="o">&gt;</span> <span class="n">temp_y</span><span class="p">){</span>
                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span><span class="p">{</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// Drawing exterior left ear
</span>        <span class="k">if</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">pos_x</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mf">0.75</span><span class="p">){</span>
            <span class="n">temp_y</span> <span class="o">=</span> <span class="mf">9.0</span> <span class="o">+</span> <span class="mi">8</span> <span class="o">*</span> <span class="n">pos_x</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">pos_y</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">temp_y</span><span class="p">){</span>
                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span><span class="p">{</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// Drawing interior left ear
</span>        <span class="k">if</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mf">0.75</span> <span class="o">&amp;&amp;</span> <span class="n">pos_x</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">){</span>
            <span class="n">temp_y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span> <span class="o">*</span> <span class="n">pos_x</span> <span class="o">+</span> <span class="mf">0.75</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">pos_y</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">temp_y</span><span class="p">){</span>
                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span><span class="p">{</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>

        <span class="p">}</span>

        <span class="c1">// Drawing top of head
</span>        <span class="k">if</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mf">.5</span> <span class="o">&amp;&amp;</span> <span class="n">pos_x</span> <span class="o">&lt;=</span> <span class="mf">0.5</span><span class="p">){</span>
            <span class="n">temp_y</span> <span class="o">=</span> <span class="mf">2.25</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">pos_y</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">temp_y</span><span class="p">){</span>
                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span><span class="p">{</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>

        <span class="p">}</span>


        <span class="c1">// Drawing interior right ear
</span>        <span class="k">if</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">&gt;</span> <span class="mf">0.5</span> <span class="o">&amp;&amp;</span> <span class="n">pos_x</span> <span class="o">&lt;=</span> <span class="mf">0.75</span><span class="p">){</span>
            <span class="n">temp_y</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">pos_x</span> <span class="o">+</span> <span class="mf">0.75</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">pos_y</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">temp_y</span><span class="p">){</span>
                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span><span class="p">{</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>

        <span class="p">}</span>

        <span class="c1">// Drawing exterior right ear
</span>        <span class="k">if</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">&gt;</span> <span class="mf">0.75</span> <span class="o">&amp;&amp;</span> <span class="n">pos_x</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">){</span>
            <span class="n">temp_y</span> <span class="o">=</span> <span class="mf">9.0</span> <span class="o">-</span> <span class="mi">8</span> <span class="o">*</span> <span class="n">pos_x</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">pos_y</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">temp_y</span><span class="p">){</span>
                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span><span class="p">{</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>


        <span class="c1">// Drawing right shoulder
</span>        <span class="k">if</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">&lt;=</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="n">pos_x</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">){</span>
            <span class="n">temp_y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="mf">2.710523708715754</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.5</span> <span class="o">-</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">pos_x</span><span class="p">))</span> 
                     <span class="o">+</span><span class="mf">1.355261854357877</span>
                     <span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">4.0</span><span class="o">-</span><span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">pos_x</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">pos_x</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">));</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">pos_y</span> <span class="o">&gt;</span> <span class="n">temp_y</span><span class="p">){</span>
                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span><span class="p">{</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        
        <span class="c1">// Drawing right upper wing
</span>        <span class="k">if</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">){</span>
            <span class="n">temp_x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">7</span> <span class="o">*</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="p">((</span><span class="n">pos_y</span> <span class="o">*</span> <span class="n">pos_y</span><span class="p">)</span><span class="o">/</span><span class="mf">9.0</span><span class="p">)));</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">&lt;=</span> <span class="n">temp_x</span><span class="p">){</span>
                <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span><span class="p">{</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>

        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">pos_y</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">){</span>
         <span class="c1">// Drawing bottom left wing
</span>         <span class="k">if</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mf">4.0</span><span class="p">){</span>
             <span class="n">temp_x</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">7</span> <span class="o">*</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="p">((</span><span class="n">pos_y</span> <span class="o">*</span> <span class="n">pos_y</span><span class="p">)</span><span class="o">/</span><span class="mf">9.0</span><span class="p">)));</span>
             <span class="k">if</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">&gt;=</span> <span class="n">temp_x</span><span class="p">){</span>
                 <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
             <span class="p">}</span>
             <span class="k">else</span><span class="p">{</span>
                 <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
             <span class="p">}</span>
         <span class="p">}</span>
         <span class="c1">// Drawing bottom wing
</span>         <span class="k">if</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mf">4.0</span> <span class="o">&amp;&amp;</span> <span class="n">pos_x</span> <span class="o">&lt;=</span> <span class="mi">4</span><span class="p">){</span>
             <span class="c1">//return false;
</span>             <span class="n">temp_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">pos_x</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> 
                       <span class="o">-</span> <span class="mf">0.09137221374655434</span> <span class="o">*</span> <span class="n">pos_x</span> <span class="o">*</span> <span class="n">pos_x</span> <span class="o">-</span> <span class="mf">3.0</span><span class="p">)</span>
                      <span class="o">+</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">pos_x</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> 
                             <span class="o">*</span> <span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">pos_x</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">));</span>
             <span class="n">temp_y</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
             <span class="k">if</span> <span class="p">(</span><span class="n">pos_y</span> <span class="o">&lt;</span> <span class="n">temp_y</span><span class="p">){</span>
                 <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
             <span class="p">}</span>
             <span class="k">else</span><span class="p">{</span>
                 <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
             <span class="p">}</span>
         <span class="p">}</span>
         <span class="c1">// Drawing bottom right wing
</span>         <span class="k">if</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">&gt;=</span> <span class="mf">4.0</span><span class="p">){</span>
             <span class="c1">//return true;
</span>             <span class="n">temp_x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">7</span> <span class="o">*</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="p">((</span><span class="n">pos_y</span> <span class="o">*</span> <span class="n">pos_y</span><span class="p">)</span><span class="o">/</span><span class="mf">9.0</span><span class="p">)));</span>
             <span class="k">if</span> <span class="p">(</span><span class="n">pos_x</span> <span class="o">&lt;=</span> <span class="n">temp_x</span><span class="p">){</span>
                 <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
             <span class="p">}</span>
             <span class="k">else</span><span class="p">{</span>
                 <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
             <span class="p">}</span>
         <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    
<span class="p">}</span>
</code></pre></div></div>

<p><a href="https://github.com/leios/simuleios/blob/master/visualization/monte_carlo/monte_carlo_vis.cpp">The full code is available here</a>.
 Note that it is a little messy and long.
 That’s because the we used <a href="https://www.cairographics.org/">Cairo</a> to do the visualization, which added a bunch of extra lines to the code.</p>

<p>Overall, this was a pretty fun side-project!</p>

<p>Thanks for reading!</p>

</div>

    </div>

  </body>
</html>
